(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"4UWl":function(e,t,a){e.exports={"games-warp":"games-warp___1hynJ","getcount-warp":"getcount-warp___1QsVB",btn:"btn___bRotk","gift-list-flex":"gift-list-flex___2GrSS","list-flex-name":"list-flex-name___z_qBn","list-flex-text":"list-flex-text___1xte6","bg-warp":"bg-warp___3GPuV",bgImg:"bgImg___j-yNA",Date:"Date___2JrA-","swiper-area":"swiper-area___1griL","win-extra-warp":"win-extra-warp___1UUFQ"}},"8nGv":function(e,t,a){e.exports=a.p+"static/scratch-card-inner-bg.34c79499.png"},SqnX:function(e,t,a){e.exports=a.p+"static/scratch-card-cover.6833b00a.png"},WGth:function(e,t,a){e.exports=a.p+"static/scratch-card-bg.881a9590.png"},"Z+V2":function(e,t,a){"use strict";var n=a("tAuX"),r=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("ufv1");var l=r(a("QYgq")),i=r(a("2Taf")),s=r(a("vZ4D")),c=r(a("l4Ni")),u=r(a("ujKo")),d=r(a("MhPg"));a("puyI");var o=r(a("xZH1")),f=n(a("q1tI")),m=a("TJpk"),p=a("Nhdc"),g=a("MuoO"),h=r(a("wd/R")),b=r(a("GKBh")),v=a("0lfv"),w=r(a("WGth")),_=r(a("SqnX")),S=r(a("8nGv")),E=r(a("4UWl")),x=function(e,t,a,n){var r,l=arguments.length,i=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(i=(l<3?r(i):l>3?r(t,a,i):r(t,a))||i);return l>3&&i&&Object.defineProperty(t,a,i),i},C=o.default.alert,y=function(e){function t(){var e;return(0,i.default)(this,t),e=(0,c.default)(this,(0,u.default)(t).apply(this,arguments)),e.state={status:!1,visible:!1,shareVisible:!1,shareStatus:!0,img:""},e.onComplete=function(t,a){var n=2===t;e.setState(function(e){return{status:n,img:a,visible:!e.visible}})},e.onClose=function(){e.setState({visible:!1})},e.shareOnClose=function(){e.setState({shareVisible:!1})},e.shareHandle=function(){var t=e.props,a=t.card,n=t.dispatch,r=a.initConfig,l=a.activityId,i=r.OpenId,s=r.CustomerId,c=r.ShareImage;i?e.setState(function(e){return{shareVisible:!0}},function(){(0,v._shareFriendAndCommunity)("card","scratchcard",n,c,l,i,s,"2","1")}):C("\u5206\u4eab\u5931\u8d25","\u6d3b\u52a8\u4ec5\u9650\u4f1a\u5458\u53c2\u4e0e\uff0c\u662f\u5426\u6ce8\u518c\u4f1a\u5458?",[{text:"\u53d6\u6d88",onPress:function(){}},{text:"\u53bb\u6ce8\u518c",onPress:function(){return window.location.href="".concat("http://crm.cdyuanxiang.cn","/WestMember/RegisteMember?fromtype=1")}}])},e}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.app.apiConfig,t=e.AppId,a=e.NonceStr,n=e.Timestamp,r=e.Signature,l=this;b.default.config({debug:!1,appId:t,timestamp:n,nonceStr:a,signature:r,jsApiList:["updateAppMessageShareData","updateTimelineShareData","onMenuShareTimeline","onMenuShareAppMessage"]}),b.default.ready(function(){l.setState(function(e){return{shareStatus:!1}});var e=l.props,t=e.card,a=e.dispatch,n=t.initConfig,r=t.activityId,i=n.OpenId,s=n.CustomerId,c=n.ShareImage;r&&i&&s&&c&&(0,v._shareFriendAndCommunity)("card","scratchcard",a,c,r,i,s,"2","1")}),b.default.error(function(e){l.setState(function(e){return{shareStatus:!0}})})}},{key:"render",value:function(){var e=this.props,t=e.card,a=e.loading,n=e.dispatch,r=e.location,i=t.initConfig,s=t.allRecord,c=t.userRecord,u=t.UnUseCount,d=t.activityId,o=i.StartTimeStamp,g=i.EndTimeStamp,b=i.Name,x=this.state,C=x.visible,y=x.status,I=x.img,N=x.shareStatus,k=x.shareVisible,O=window.innerWidth,M=window.innerWidth/100*19.2,P=window.innerWidth/100*5,D={canvasWidth:O-M,eraserSize:P,coverColor:"#ddd",sampleStep:1,coverImage:_.default,isShowCover:!0,bgImage:S.default,finishPercent:6,onComplete:this.onComplete,dispatch:n,location:r,activityId:d,endDate:g,startDate:o},T={visible:C,img:I,status:y,onClose:this.onClose},j={visible:k,onClose:this.shareOnClose};return f.default.createElement(f.default.Fragment,null,f.default.createElement(m.Helmet,null,f.default.createElement("title",null,b||" \u522e\u522e\u4e50\uff0c\u522e\u597d\u793c")),f.default.createElement(p.Page,{loading:a.effects["card/getInit"],holdText:"\u52a0\u8f7d\u521d\u59cb\u6570\u636e\u4e2d, \u8bf7\u7a0d\u540e..."},f.default.createElement("div",{className:E.default["games-warp"],id:"scratchCard-warp"},f.default.createElement("div",{className:E.default["bg-warp"]},f.default.createElement("img",{src:w.default,className:E.default.bgImg,alt:""}),f.default.createElement("p",{className:E.default.Date},(0,v.DateRangeRender)(o,g))),f.default.createElement("div",{className:E.default["swiper-area"]},c.map(function(e,t){return f.default.createElement(p.ScratchCard,Object.assign({key:t},D,{isShowCover:!1,status:2,PrizeName:e.PrizeName,isEmpty:!1}))}),u>0?new Array(u).fill(0).map(function(e,t){return f.default.createElement(p.ScratchCard,Object.assign({key:t},D,{isShowCover:!0,status:0,PrizeName:"",isEmpty:!0}))}):f.default.createElement("p",{style:{padding:"12px 0",textAlign:"center",color:"#fff"}},"\u6682\u65e0\u66f4\u591a\u62bd\u5956"),f.default.createElement(l.default,null),f.default.createElement(l.default,null),f.default.createElement(p.GameItemCard,{title:"\u83b7\u53d6\u62bd\u5956\u6b21\u6570",holdText:"\u6682\u65e0\u6d3b\u52a8",background:"rgba(255, 255, 255, 0.1)"},f.default.createElement("ul",{className:E.default["getcount-warp"]},f.default.createElement("li",null,f.default.createElement("p",null,"1.\u6bcf\u65e5\u9996\u6b21\u5206\u4eab\u5230\u670b\u53cb\u5708\u53ef\u83b7\u5f971\u6b21\u62bd\u5956\u673a\u4f1a"),f.default.createElement("div",{className:E.default["flex-btn"]},f.default.createElement("button",{className:E.default.btn,disabled:N,onClick:this.shareHandle},"\u53bb\u5206\u4eab"))))),f.default.createElement(p.GameItemCard,{title:"\u4e2d\u5956\u8bb0\u5f55",holdText:"\u6682\u65e0\u4e2d\u5956\u8bb0\u5f55",background:"rgba(255, 255, 255, 0.1)"},0!==s.length?f.default.createElement("ul",{className:E.default["gift-list-flex"]},s.map(function(e,t){return f.default.createElement("li",{key:t},f.default.createElement("div",{className:E.default["list-flex-name"],style:{WebkitBoxOrient:"vertical"}},e.CustomerName),f.default.createElement("div",null,(0,h.default)(e.ShowCeateTime).format("YYYY-MM-DD HH:mm")),f.default.createElement("div",{className:E.default["list-flex-text"],style:{WebkitBoxOrient:"vertical"}},e.PrizeName))})):null),f.default.createElement(p.GameItemCard,{title:"\u6d3b\u52a8\u89c4\u5219",holdText:"\u6682\u65e0\u6d3b\u52a8\u89c4\u5219",background:"rgba(255, 255, 255, 0.1)"},f.default.createElement("p",null,"1\uff0c\u6ce8\u518c\u4f1a\u5458\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f973\u6b21\u62bd\u5956\u673a\u4f1a"),f.default.createElement("p",null,"2\uff0c\u6ce8\u518c\u4f1a\u5458\u53ef\u4ee5\u76f4\u63a5\u83b7\u5f973\u6b21\u62bd\u5956\u673a\u4f1a"))),f.default.createElement(p.GiftModal,Object.assign({},T)),f.default.createElement(p.ShareModal,Object.assign({},j)))))}}]),t}(f.PureComponent);y=x([(0,g.connect)(function(e){var t=e.app,a=e.card,n=e.loading;return{app:t,card:a,loading:n}})],y);var I=y;t.default=I}}]);